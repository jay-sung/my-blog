<!DOCTYPE html>
<html lang="en-us"
  dir="ltr">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">








    






<link rel="icon" type="image/ico" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="192x192" href="http://localhost:1313/android-chrome-192x192.png">
<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:1313/apple-touch-icon.png">

<meta name="description" content=""/>



<title>
    
    C&#43;&#43; Utilities library (1) - optional | Jay Tech Blog
    
</title>

<link rel="canonical" href="http://localhost:1313/posts/cpp-util-libs/cpp-optional/"/>

<meta property="og:url" content="http://localhost:1313/posts/cpp-util-libs/cpp-optional/">
  <meta property="og:site_name" content="Jay Tech Blog">
  <meta property="og:title" content="C&#43;&#43; Utilities library (1) - optional">
  <meta property="og:description" content="Optional을 통해 값이 존재할 수도, 존재할 수도 있음을 표현할 수 있습니다.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-08-06T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-08-06T00:00:00+00:00">
    <meta property="article:tag" content="Cpp">












<link rel="stylesheet" href="/assets/combined.min.56b1873d8852f8a5a109abda36c1bfcde55cb48e5bcbe0d8c934a196a7dc374a.css" media="all">











    




</head>







<body class="auto">

  <div class="content">
    <header>
      

<div class="header">

    

    <h1 class="header-title">
        <a href="http://localhost:1313/">Jay Tech Blog</a>
    </h1>

    <div class="header-menu">
        

        
        

        <p
            class="small ">
            <a href="/" >
                /home
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/posts" >
                /posts
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/about" >
                /about
            </a>
        </p>
        
        
    </div>

    

</div>

    </header>

    <main class="main">
      




<div class="breadcrumbs"><a href="/">Home</a><span class="breadcrumbs-separator">/</span><a href="/posts/">Posts</a><span class="breadcrumbs-separator">/</span>
        <a href="/posts/cpp-util-libs/cpp-optional/">C&#43;&#43; Utilities library (1) - optional</a></div>


<div  class="autonumber" >
  <article>
    <header class="single-intro-container">
        
        <h1 class="single-title">C&#43;&#43; Utilities library (1) - optional</h1>
        <p class="single-summary">Optional을 통해 값이 존재할 수도, 존재할 수도 있음을 표현할 수 있습니다.</p>
        
        <div class="single-subsummary">
          
          <div>
            
            <p class="author">Jay645 </p>
            
            <p class="single-date">
              <time datetime="2025-08-06T00:00:00&#43;00:00">August 6, 2025</time>
              &nbsp; · &nbsp;2 min read
            </p>
          </div>
        </div>
        
    </header>
      <aside class="toc">
        <p><strong>Table of contents</strong></p>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#optional">optional</a>
      <ul>
        <li><a href="#생성-및-초기화">생성 및 초기화</a></li>
        <li><a href="#modifiers">Modifiers</a></li>
        <li><a href="#monadic-연산자">Monadic 연산자</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </aside>
    
    <div class="single-content">
      <p>필요 사전 지식: C++</p>
<h2 class="heading" id="optional">
  optional
  <a class="anchor" href="#optional">#</a>
</h2>
<p>C++17에서 새롭게 추가된 <code>std::optional</code>은 값의 유무를 더욱 명시적으로 표현할 수 있어 유용하게 활용될 수 있습니다.</p>
<p><code>optional</code>은 <code>operator*()</code>, <code>operator-&gt;()</code>, <code>value()</code>, 또는 <code>value_or()</code>을 통해 안전하게 값에 접근합니다.</p>
<ul>
<li><code>value()</code> : 값을 반환하며, 값이 없다면 <code>std::bad_optional_access</code> 예외를 발생시킵니다.</li>
<li><code>value_or(default)</code> : 값을 반환하며, 만약 값이 없다면 지정한 기본값으로 반환합니다.</li>
</ul>
<h3 class="heading" id="생성-및-초기화">
  생성 및 초기화
  <a class="anchor" href="#%ec%83%9d%ec%84%b1-%eb%b0%8f-%ec%b4%88%ea%b8%b0%ed%99%94">#</a>
</h3>
<p>기본적으로 <code>optional</code>은 값이 없는 상태입니다. 직접 값 또는 다른 <code>optional</code>로 초기화할 수 있으며, <code>std::nullopt</code>으로도 명시적으로 설정할 수도 있습니다.</p>
<p>유틸리티 함수 <code>std::make_optional(...)</code>을 통해서 <code>T</code> 인자를 통해 직접 <code>optional&lt;T&gt;</code>를 생성 할 수도 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="font-weight:bold;text-decoration:underline">auto</span> opt_value = std::make_optional&lt;<span style="font-weight:bold;text-decoration:underline">int</span>&gt;(10);
</span></span></code></pre></div><h3 class="heading" id="modifiers">
  Modifiers
  <a class="anchor" href="#modifiers">#</a>
</h3>
<p><code>optional</code>을 유용하게 활용할 수 있는 수정자들을 소개합니다.</p>
<ul>
<li><code>reset()</code> : 포함된 값을 제거하여 empty 상태로 전환.</li>
<li><code>swap()</code> : 두 <code>optional</code> 간 내용 교환.</li>
<li><code>emplace()</code> : in-place 생성 및 기존 값을 제거합니다.</li>
</ul>
<h3 class="heading" id="monadic-연산자">
  Monadic 연산자
  <a class="anchor" href="#monadic-%ec%97%b0%ec%82%b0%ec%9e%90">#</a>
</h3>
<p>C++23부터 <code>optional</code>을 모나딕하게 사용하게 도와주는 연산자들을 소개합니다. 이를 함수형 프로그래밍의 모나드의 개념을 활용할 수 있습니다.</p>
<ul>
<li><code>and_then</code> : 값이 있으면 함수를 적용하고 결과를 반환합니다. (flatMap)</li>
<li><code>transform</code> : 값이 있으면 함수를 적용하고 변환된 값을 감싼 <code>optional</code>을 반환합니다. (map)</li>
<li><code>or_else</code> : 값이 없으면 대체 값을 생성하거나 변환합니다. (fallback)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#888;font-weight:bold">#include</span> <span style="color:#888;font-weight:bold">&lt;iostream&gt;</span><span style="color:#888;font-weight:bold">
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-weight:bold">#include</span> <span style="color:#888;font-weight:bold">&lt;string&gt;</span><span style="color:#888;font-weight:bold">
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-weight:bold">#include</span> <span style="color:#888;font-weight:bold">&lt;optional&gt;</span><span style="color:#888;font-weight:bold">
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-weight:bold"></span>
</span></span><span style="display:flex;"><span>std::optional&lt;std::string&gt; get_username(<span style="font-weight:bold;text-decoration:underline">int</span> id) {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">if</span> (id == 1) <span style="font-weight:bold;text-decoration:underline">return</span> <span style="color:#666;font-style:italic">&#34;alice&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">return</span> std::nullopt;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>std::optional&lt;std::string&gt; get_email(<span style="font-weight:bold;text-decoration:underline">const</span> std::string&amp; username) {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">if</span> (username == <span style="color:#666;font-style:italic">&#34;alice&#34;</span>) <span style="font-weight:bold;text-decoration:underline">return</span> <span style="color:#666;font-style:italic">&#34;alice@example.com&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">return</span> std::nullopt;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>std::optional&lt;std::string&gt; extract_domain(<span style="font-weight:bold;text-decoration:underline">const</span> std::string&amp; email) {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">auto</span> pos = email.find(<span style="color:#666;font-style:italic">&#39;@&#39;</span>);
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">if</span> (pos != std::string::npos)
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold;text-decoration:underline">return</span> email.substr(pos + 1);
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">return</span> std::nullopt;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold;text-decoration:underline">int</span> <span style="color:#666;font-weight:bold;font-style:italic">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">int</span> user_id = 1;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    std::optional&lt;std::string&gt; domain = get_username(user_id)
</span></span><span style="display:flex;"><span>        .and_then(get_email)
</span></span><span style="display:flex;"><span>        .and_then(extract_domain)
</span></span><span style="display:flex;"><span>        .or_else([] {
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold;text-decoration:underline">return</span> std::optional&lt;std::string&gt;{<span style="color:#666;font-style:italic">&#34;unknown.com&#34;</span>};
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    std::cout &lt;&lt; <span style="color:#666;font-style:italic">&#34;Domain: &#34;</span> &lt;&lt; *domain &lt;&lt; <span style="color:#666;font-style:italic">&#34;</span><span style="color:#666;font-style:italic">\n</span><span style="color:#666;font-style:italic">&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>중간 단계에서 실패하면 &ldquo;unknown.com&quot;으로 대체되는 이메일 추출 프로그램 예제입니다.</p></blockquote>

    </div>
  </article>

  

  

  
  

<div class="single-pagination">
    <hr />

    <div class="flexnowrap">

        <div class="single-pagination-prev">
            
            <div class="single-pagination-container-prev">
                <div class="single-pagination-text">←</div>
                <div class="single-pagination-text">
                    <a href="/posts/cpp-value-categories/">
                        C&#43;&#43; Value Categories
                    </a>
                </div>
            </div>
            
        </div>

        <div class="single-pagination-next">
            
            <div class="single-pagination-container-next">
                <div class="single-pagination-text">
                    <a href="/posts/graphics-math/graphics-math-1/">
                        Math for Graphics (1) - Point, Vector
                    </a>
                </div>
                <div class="single-pagination-text">→</div>
            </div>
            
        </div>

    </div>

    <hr />
</div>



  

  

  
  <div class="back-to-top">
    <a href="#top">
      back to top
    </a>
  </div>
  

</div>


    </main>
  </div>

  
  





    




  <footer>
    

    
    





    




    
    <p>Powered by
        <a href="https://gohugo.io/">Hugo</a>
        and
        <a href="https://github.com/tomfran/typo">tomfran/typo</a>
    </p>
    
    
    


  </footer>

  
</body>

<script src="/js/theme-switch.js"></script>
<script defer src="/js/copy-code.js"></script>
</html>
